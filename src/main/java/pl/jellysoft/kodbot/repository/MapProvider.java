package pl.jellysoft.kodbot.repository;

import org.apache.commons.lang3.ArrayUtils;
import org.springframework.stereotype.Component;
import pl.jellysoft.kodbot.model.GameMap;

import java.util.Arrays;
import java.util.List;
import java.util.Map;
import java.util.function.Function;

import static java.util.stream.Collectors.toMap;
import static pl.jellysoft.kodbot.resolver.simulator.BotDirection.BOTTOM_LEFT;
import static pl.jellysoft.kodbot.resolver.simulator.BotDirection.BOTTOM_RIGHT;
import static pl.jellysoft.kodbot.resolver.simulator.BotDirection.TOP_LEFT;
import static pl.jellysoft.kodbot.resolver.simulator.BotDirection.TOP_RIGHT;

@Component
public class MapProvider {

    private static final GameMap[] GAME_MAPS = new GameMap[]{
            new GameMap("0197b66c0c6670bdc518e52e51c00c32", 5, 2, BOTTOM_RIGHT, 100, "map1_slide1|map1_slide2|map1_slide3|map1_slide4|map1_slide5|map1_slide6|map1_slide7|map1_slide8|map1_slide9|map1_slide10|map1_slide11", "[102 5 7]"),
            new GameMap("02b935e6bc094f8da1b852ed619183bd", 5, 2, BOTTOM_RIGHT, 100, "map2_slide1", "[1 5 4] [1 5 5] [102 5 7]"),
            new GameMap("035e7213f783038e4019fab444e85ec1", 5, 2, BOTTOM_RIGHT, 100, "map3_slide1", "[3 5 4] [3 5 5] [102 5 7]"),
            new GameMap("0477fc4aade86292b60e8df852c03477", 2, 2, BOTTOM_RIGHT, 50, null, "[3 3 4] [3 3 5] [3 4 3] [3 4 6] [3 5 3] [3 5 6] [3 6 4] [3 6 5] [102 2 7] [101 7 7] [100 7 2]"),
            new GameMap("05b6edf731febab98b0aed5594c08e69", 3, 3, BOTTOM_RIGHT, 100, null, "[1 3 3] [1 3 4] [1 3 5] [1 3 6] [1 4 3] [1 4 6] [1 5 3] [1 5 6] [1 6 3] [1 6 4] [1 6 5] [1 6 6] [100 3 6] [102 6 3]"),
            new GameMap("066711e991eb2dd833a8386d7fe3d1b3", 1, 1, TOP_RIGHT, 100, null, "[1 2 1] [1 3 1] [1 3 1] [1 4 1] [1 4 1] [1 4 1] [1 5 1] [1 5 1] [1 5 1] [1 5 1] [1 6 1] [1 6 1] [1 6 1] [1 6 1] [1 6 1] [1 6 2] [1 6 2] [1 6 2] [1 6 2] [1 6 2] [1 6 3] [1 6 3] [1 6 3] [1 6 3] [1 6 3] [1 6 4] [1 6 4] [1 6 4] [1 6 4] [1 6 4] [1 6 5] [1 6 5] [1 6 5] [1 6 5] [1 6 5] [1 6 6] [1 6 6] [1 6 6] [1 6 6] [1 6 6] [101 6 6]"),
            new GameMap("07357fdaadfe8381db7f148d900d3165", 1, 4, BOTTOM_RIGHT, 25, null, "[1 1 4] [1 1 5] [1 1 6] [1 1 7] [1 2 7] [1 3 7] [1 4 4] [1 4 5] [1 4 6] [1 4 7] [1 5 4] [1 5 4] [1 6 4] [1 6 4] [1 6 4] [1 7 4] [1 7 4] [1 7 4] [1 7 4] [100 1 7] [100 4 7] [100 4 4] [100 7 4]"),
            new GameMap("089b11ef5dac2d659666d11a64076a0d", 5, 5, BOTTOM_LEFT, 100, null, "[1 3 3] [1 3 4] [1 3 5] [1 3 6] [1 3 7] [1 4 3] [1 4 5] [1 4 7] [1 5 3] [1 5 4] [2 5 5] [1 5 6] [1 5 7] [1 6 3] [1 6 5] [1 6 7] [1 7 3] [1 7 4] [1 7 5] [1 7 6] [1 7 7] [101 3 3] [101 3 5] [101 3 7]  [101 5 3] [101 5 7] [101 7 3] [101 7 5] [101 7 7]"),
            new GameMap("099bbc144b9575e5a9a2c8f892dadce1", 3, 7, TOP_LEFT, 100, null, "[1 2 3] [1 2 6] [1 3 2] [1 3 3] [1 3 4] [1 3 5] [1 3 6] [1 3 7] [1 4 3] [1 4 6] [1 5 3] [1 5 6] [1 6 2] [1 6 3] [1 6 4] [1 6 5] [1 6 6] [1 6 7] [1 7 3] [1 7 6] [1 3 3] [1 3 6] [1 6 3] [1 6 6] [101 3 3] [101 3 6] [101 6 3] [101 6 6]"),
            new GameMap("106f2cad6348f29698a6e435efb9523a", 1, 0, BOTTOM_RIGHT, 50, null, "[1 1 4] [1 2 4] [1 3 4] [1 4 4] [1 4 5] [1 4 6] [1 4 7] [1 4 8] [1 5 1] [1 5 2] [1 5 3] [1 5 4] [1 5 5] [1 6 5] [1 7 5] [1 8 5] [100 4 4] [100 4 5] [100 5 4] [100 5 5] [101 1 4] [101 4 8] [101 5 1] [101 8 5]"),
            new GameMap("11ea04e201134f60adb066eeadaade63", 1, 4, BOTTOM_RIGHT, 50, null, "[1 2 2] [2 2 2] [1 2 3] [1 2 3] [1 2 4] [1 2 5] [1 2 6] [1 2 6] [1 2 7] [2 2 7] [1 3 2] [1 3 2] [1 3 7] [1 3 7] [1 4 2] [1 4 7] [1 5 2] [1 5 7] [1 6 2] [1 6 2] [1 6 7] [1 6 7] [1 7 2] [2 7 2] [1 7 3] [1 7 3] [1 7 4] [1 7 5] [1 7 6] [1 7 6] [1 7 7] [2 7 7] [101 2 2] [101 2 7] [101 7 2] [101 7 7]"),
            new GameMap("127d6660beffbd076b90667c7e21ecd1", 6, 0, BOTTOM_LEFT, 25, null, "[1 4 0] [1 4 1] [1 4 2] [1 4 4] [1 4 5] [1 4 6] [1 4 8] [1 5 0] [1 5 2] [1 5 4] [1 5 6] [1 5 8] [1 6 0] [1 6 2] [1 6 3] [1 6 4] [1 6 6] [1 6 7] [1 6 8] [3 5 1] [3 5 3] [3 5 5] [3 5 7] [100 6 2] [100 6 4] [100 6 6] [100 6 8]"),
            new GameMap("139e2f69fb1231c12dca50fddc2c5ab6", 2, 7, TOP_LEFT, 100, null, "[1 2 2] [1 2 3] [1 2 3] [1 2 4] [1 2 4] [1 2 4] [1 2 5] [1 2 5] [1 2 6] [1 3 1] [1 3 7] [1 4 1] [1 4 1] [1 4 7] [1 4 7] [1 5 1] [1 5 1] [1 5 1] [1 5 7] [1 5 7] [1 5 7] [1 6 1] [1 6 1] [1 6 7] [1 6 7] [1 7 1] [1 7 7] [1 8 2] [1 8 3] [1 8 3] [1 8 4] [1 8 4] [1 8 4] [1 8 5] [1 8 5] [1 8 6] [101 2 4] [101 5 1] [101 5 7] [101 8 4]"),
            new GameMap("2f02d656817eea021ce1798fbee6c407", 2, 2, BOTTOM_RIGHT, 100, null, "[1 2 3] [1 2 6] [1 3 2] [1 3 3] [1 3 4] [1 3 5] [1 3 6] [1 3 7] [1 4 3] [1 4 6] [1 5 3] [1 5 6] [1 6 2] [1 6 3] [1 6 4] [1 6 5] [1 6 6] [1 6 7] [1 7 3] [1 7 6] [3 3 3] [3 3 6] [3 6 3] [3 6 6] [101 2 3] [101 2 6] [101 3 2] [101 3 7] [101 6 2] [101 6 7] [101 7 3] [101 7 6]"),
            new GameMap("6ecef5aba2c0e548862a0ff17b879e05", 8, 5, BOTTOM_LEFT, 10, null, "[1 2 4] [1 2 5] [1 3 4] [1 3 5] [1 4 2] [1 4 3] [1 4 4] [1 4 5] [1 4 6] [1 4 7] [1 5 2] [1 5 3] [1 5 4] [1 5 5] [1 5 6] [1 5 7] [1 6 4] [1 6 5] [1 7 4] [1 7 5] [101 2 4] [101 5 2] [101 7 5] [101 4 7]  [1 4 4] [1 4 5] [1 5 4] [1 5 5] [3 2 5] [3 3 5] [3 4 2] [3 4 3] [3 6 4] [3 7 4] [3 5 6] [3 5 7]"),
            new GameMap("47301eb7cff2fe3e33773b94047e2629", 0, 0, TOP_RIGHT, 15, null, "[1 0 0] [1 1 0] [1 2 0] [1 3 0] [1 3 1] [1 3 2] [1 3 3] [1 2 3] [1 1 3] [1 0 3] [1 0 4] [1 0 5] [1 0 6] [1 1 6] [1 2 6] [1 3 6] [1 3 7] [1 3 8] [1 3 9] [1 4 9] [1 5 9] [1 6 0] [1 6 1] [1 6 2] [1 6 3] [1 6 6] [1 6 7] [1 6 8] [1 6 9] [1 7 0] [1 7 3] [1 7 6] [1 8 0] [1 8 3] [1 8 6] [1 9 0] [1 9 3] [1 9 4] [1 9 5] [1 9 6] [1 0 0] [1 1 0] [1 2 0] [1 3 0] [1 3 1] [1 3 2] [1 3 3] [1 2 3] [1 1 3] [1 0 3] [1 0 4] [1 0 5] [1 0 6] [1 1 6] [1 2 6] [1 3 6] [1 3 7] [1 3 8] [1 3 9] [1 4 9] [1 5 9] [1 6 0] [1 6 1] [1 6 2] [1 6 3] [1 6 6] [1 6 7] [1 6 8] [1 6 9] [1 7 0] [1 7 3] [1 7 6] [1 8 0] [1 8 3] [1 8 6] [1 9 0] [1 9 3] [1 9 4] [1 9 5] [1 9 6] [100 3 0] [100 3 3] [100 0 3] [100 0 6] [100 3 6] [100 3 9] [100 6 0] [100 6 3] [100 6 6] [100 6 9] [100 9 0] [100 9 3] [100 9 6]"),
            new GameMap("d797cb921bc8647051f99d98742b0bfc", 0, 9, TOP_RIGHT, 100, null, "[3 0 0] [3 0 1] [3 0 2] [3 0 3] [3 0 4] [3 0 5] [3 0 6] [3 0 7] [3 0 8] [3 1 0] [3 1 1] [3 1 2] [3 1 3] [3 1 4] [3 1 5] [3 1 6] [3 1 7] [3 1 8] [3 2 0] [3 2 8] [3 3 0] [3 3 2] [3 3 3] [3 3 4] [3 3 5] [3 3 6] [3 3 8] [3 4 0] [3 4 2] [3 4 6] [3 4 8] [3 5 0] [3 5 2] [3 5 4] [3 5 6] [3 5 8] [3 6 0] [3 6 2] [3 6 4] [3 6 5] [3 6 6] [3 6 8] [3 7 0] [3 7 2] [3 7 8] [3 8 0] [3 8 2] [3 8 3] [3 8 4] [3 8 5] [3 8 6] [3 8 7] [3 8 8] [3 9 0] [102 9 9] [101 9 1] [101 2 1] [101 2 7] [100 7 7] [100 4 3] [100 5 5]"),
            new GameMap("a8f4f0cbd20a8247a783a3bad5e4b116", 1, 2, TOP_RIGHT, 35, null, "[1 1 2] [1 2 2] [1 2 3] [1 2 4] [1 2 5] [1 2 6] [1 2 7] [1 3 2] [1 4 2] [1 4 3] [1 4 4] [1 4 5] [1 4 6] [1 4 7] [1 5 2] [1 6 2] [1 6 3] [1 6 4] [1 6 5] [1 6 6] [1 6 7] [1 7 2] [1 8 2] [1 8 3] [1 8 4] [1 8 5] [1 8 6] [1 8 7] [1 9 2] [1 1 2] [1 2 2] [1 2 3] [1 2 4] [1 2 5] [1 2 6] [1 2 7] [1 3 2] [1 4 2] [1 4 3] [1 4 4] [1 4 5] [1 4 6] [1 4 7] [1 5 2] [1 6 2] [1 6 3] [1 6 4] [1 6 5] [1 6 6] [1 6 7] [1 7 2] [1 8 2] [1 8 3] [1 8 4] [1 8 5] [1 8 6] [1 8 7] [1 9 2] [101 2 7] [101 3 2] [101 4 7] [100 5 2] [101 6 7] [101 7 2] [101 8 7] [100 9 2]"),
            new GameMap("6fbff8cd15e95648c998e70fe39c4ebe", 0, 8, TOP_LEFT, 100, null, "[100 0 1] [100 0 3] [100 0 5] [100 0 7] [1 1 1] [1 1 2] [1 1 3] [1 1 4] [1 1 5] [1 1 6] [1 1 7] [100 1 1] [100 1 3] [100 1 5] [100 1 7] [1 2 1] [1 2 2] [1 2 3] [1 2 4] [1 2 5] [1 2 6] [1 2 7] [1 2 1] [1 2 2] [1 2 3] [1 2 4] [1 2 5] [1 2 6] [1 2 7] [100 2 1] [100 2 3] [100 2 5] [100 2 7] [1 3 1] [1 3 2] [1 3 3] [1 3 4] [1 3 5] [1 3 6] [1 3 7] [1 3 1] [1 3 2] [1 3 3] [1 3 4] [1 3 5] [1 3 6] [1 3 7] [1 3 1] [1 3 2] [1 3 3] [1 3 4] [1 3 5] [1 3 6] [1 3 7] [100 3 1] [100 3 3] [100 3 5] [100 3 7] [1 4 1] [1 4 2] [1 4 3] [1 4 4] [1 4 5] [1 4 6] [1 4 7] [1 4 1] [1 4 2] [1 4 3] [1 4 4] [1 4 5] [1 4 6] [1 4 7] [1 4 1] [1 4 2] [1 4 3] [1 4 4] [1 4 5] [1 4 6] [1 4 7] [1 4 1] [1 4 2] [1 4 3] [1 4 4] [1 4 5] [1 4 6] [1 4 7] [100 4 1] [100 4 3] [100 4 5] [100 4 7] [1 5 1] [1 5 2] [1 5 3] [1 5 4] [1 5 5] [1 5 6] [1 5 7] [1 5 1] [1 5 2] [1 5 3] [1 5 4] [1 5 5] [1 5 6] [1 5 7] [1 5 1] [1 5 2] [1 5 3] [1 5 4] [1 5 5] [1 5 6] [1 5 7] [1 5 1] [1 5 2] [1 5 3] [1 5 4] [1 5 5] [1 5 6] [1 5 7] [1 5 1] [1 5 2] [1 5 3] [1 5 4] [1 5 5] [1 5 6] [1 5 7] [100 5 1] [100 5 3] [100 5 5] [100 5 7] [1 6 1] [1 6 2] [1 6 3] [1 6 4] [1 6 5] [1 6 6] [1 6 7] [1 6 1] [1 6 2] [1 6 3] [1 6 4] [1 6 5] [1 6 6] [1 6 7] [1 6 1] [1 6 2] [1 6 3] [1 6 4] [1 6 5] [1 6 6] [1 6 7] [1 6 1] [1 6 2] [1 6 3] [1 6 4] [1 6 5] [1 6 6] [1 6 7] [1 6 1] [1 6 2] [1 6 3] [1 6 4] [1 6 5] [1 6 6] [1 6 7] [1 6 1] [1 6 2] [1 6 3] [1 6 4] [1 6 5] [1 6 6] [1 6 7] [100 6 1] [100 6 3] [100 6 5] [100 6 7]"),
            new GameMap("0ad61f1aab5d66210bc6da1098edd27e", 0, 8, TOP_LEFT, 100, null, "[100 0 1] [100 0 3] [100 0 5] [100 0 7] [1 1 1] [1 1 2] [1 1 3] [1 1 4] [1 1 5] [1 1 6] [1 1 7] [100 1 1] [100 1 3] [100 1 5] [100 1 7] [1 2 1] [1 2 2] [1 2 3] [1 2 4] [1 2 5] [1 2 6] [1 2 7] [1 2 1] [1 2 2] [1 2 3] [1 2 4] [1 2 5] [1 2 6] [1 2 7] [100 2 1] [100 2 3] [100 2 5] [100 2 7] [1 3 1] [1 3 2] [1 3 3] [1 3 4] [1 3 5] [1 3 6] [1 3 7] [1 3 1] [1 3 2] [1 3 3] [1 3 4] [1 3 5] [1 3 6] [1 3 7] [1 3 1] [1 3 2] [1 3 3] [1 3 4] [1 3 5] [1 3 6] [1 3 7] [100 3 1] [100 3 3] [100 3 5] [100 3 7] [1 4 1] [1 4 2] [1 4 3] [1 4 4] [1 4 5] [1 4 6] [1 4 7] [1 4 1] [1 4 2] [1 4 3] [1 4 4] [1 4 5] [1 4 6] [1 4 7] [1 4 1] [1 4 2] [1 4 3] [1 4 4] [1 4 5] [1 4 6] [1 4 7] [1 4 1] [1 4 2] [1 4 3] [1 4 4] [1 4 5] [1 4 6] [1 4 7] [100 4 1] [100 4 3] [100 4 5] [100 4 7] [1 5 1] [1 5 2] [1 5 3] [1 5 4] [1 5 5] [1 5 6] [1 5 7] [1 5 1] [1 5 2] [1 5 3] [1 5 4] [1 5 5] [1 5 6] [1 5 7] [1 5 1] [1 5 2] [1 5 3] [1 5 4] [1 5 5] [1 5 6] [1 5 7] [1 5 1] [1 5 2] [1 5 3] [1 5 4] [1 5 5] [1 5 6] [1 5 7] [1 5 1] [1 5 2] [1 5 3] [1 5 4] [1 5 5] [1 5 6] [1 5 7] [100 5 1] [100 5 3] [100 5 5] [100 5 7] [1 6 1] [1 6 2] [1 6 3] [1 6 4] [1 6 5] [1 6 6] [1 6 7] [1 6 1] [1 6 2] [1 6 3] [1 6 4] [1 6 5] [1 6 6] [1 6 7] [1 6 1] [1 6 2] [1 6 3] [1 6 4] [1 6 5] [1 6 6] [1 6 7] [1 6 1] [1 6 2] [1 6 3] [1 6 4] [1 6 5] [1 6 6] [1 6 7] [1 6 1] [1 6 2] [1 6 3] [1 6 4] [1 6 5] [1 6 6] [1 6 7] [1 6 1] [1 6 2] [1 6 3] [1 6 4] [1 6 5] [1 6 6] [1 6 7] [100 6 1] [100 6 3] [100 6 5] [100 6 7] [3 1 2] [3 1 4] [3 1 6] [3 2 2] [3 2 4] [3 2 6] [3 3 2] [3 3 4] [3 3 6] [3 4 2] [3 4 4] [3 4 6] [3 5 2] [3 5 4] [3 5 6] [3 6 2] [3 6 4] [3 6 6]"),
            new GameMap("c0a09c14e1f7e6364decb4bafb1e3a06", 4, 0, BOTTOM_RIGHT, 100, null, "[1 5 0] [1 5 1] [1 5 2] [1 5 3] [1 5 4] [1 6 0] [1 6 1] [1 6 2] [1 6 3] [1 6 4] [1 6 0] [1 6 1] [1 6 2] [1 6 3]  [1 7 0] [1 7 1] [1 7 2] [1 7 3] [1 7 4] [1 7 0] [1 7 1] [1 7 2] [1 7 3] [1 7 0] [1 7 1] [1 7 2]  [1 8 0] [1 8 1] [1 8 2] [1 8 3] [1 8 4] [1 8 0] [1 8 1] [1 8 2] [1 8 3] [1 8 0] [1 8 1] [1 8 2] [1 8 0] [1 8 1] [1 9 0] [1 9 1] [1 9 2] [1 9 3] [1 9 4] [1 9 0] [1 9 1] [1 9 2] [1 9 3] [1 9 0] [1 9 1] [1 9 2] [1 9 0] [1 9 1] [1 9 0] [100 5 0] [100 5 4] [100 6 0] [100 6 3] [100 7 0] [100 7 2] [100 8 0] [100 8 1] [100 9 0] [100 9 1] [100 9 2] [100 9 3] [100 9 4]")
    };

    private static final Map<String, GameMap> keyToGameMapMapping = Arrays.stream(GAME_MAPS).collect(toMap(GameMap::getKey, Function.identity()));

    public GameMap getMapByKey(String key) {
        return keyToGameMapMapping.get(key);
    }

    public List<GameMap> getAllMaps() {
        return Arrays.asList(GAME_MAPS);
    }

    public String getNextGameMapKey(GameMap currentMap) {
        int nextMapIndex = ArrayUtils.indexOf(GAME_MAPS, currentMap) + 1;
        return GAME_MAPS.length > nextMapIndex ? GAME_MAPS[nextMapIndex].getKey() : null;
    }

}
